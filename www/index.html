<!DOCTYPE html>

<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />             
        <title>Tic Tac Toe</title>
		<link rel="stylesheet" type="text/css" href="css/tictactoe.css">
    </head>
    <body>
			
		
        
        <script type="text/javascript" src="phonegap.js"></script>
       	<script type="text/javascript" src="js/jquery-1.8.2.js"></script>
       

		<h2>Tic Tac Toe</h2>
		
		<table border="1">
		<tr>
			<td><div  id="txtBox1" class="tictactoebox"/></td>
			<td><div  id="txtBox2" class="tictactoebox"/></td>
			<td><div  id="txtBox3"class="tictactoebox"/></td>
		
		</tr>
		<tr>
			<td><div  id="txtBox4"class="tictactoebox"/></td>
			<td><div  id="txtBox5"class="tictactoebox"/></td>
			<td><div  id="txtBox6"class="tictactoebox"/></td>
		
		</tr>
		<tr>
			<td><div  id="txtBox7"class="tictactoebox"/></td>
			<td><div  id="txtBox8"class="tictactoebox"/></td>
			<td><div  id="txtBox9"class="tictactoebox"/></td>
		
		</tr>
		</table>
		<br/>
		<button id="btnClear">Clear</button>
		
		<script>
		
		
		//global variables
		
		var gamewon=false;
		
		//event listeners
		
		$(".tictactoebox").click(markX);
		$("#btnClear").click(clearSquares)
		$(".tictactoebox").dblclick(makeRed);
		
		
		
		//functions
		
		function determineIfGameWon()
		{
			
			
			determineWinner(1,2,3);
			determineWinner(2,5,8);
			determineWinner(3,6,9);
			determineWinner(1,5,9);
			determineWinner(4,5,6);
			determineWinner(7,8,9);
			determineWinner(3,5,7);
			determineWinner(1,4,7);
			
		
		
		
		}
		function determineWinner(x,y,z)
		{
			
			
			if 
			(
				$("#txtBox" + x).html()== $("#txtBox" + y).html() &&
				$("#txtBox" + x).html()== $("#txtBox" + z).html() &&
				$("#txtBox" + x).html()!= ""
				
			)
			{
				makeRed(x,y,z);
				alert($("#txtBox" + x).html() + " wins!!!!!")
				gamewon=true;
				
				
			}
		}
		
		
		function makeRed(x,y,z)
		{
			var box ="#txtBox" + x;
			var box2 ="#txtBox" + y;
			var box3 ="#txtBox" + z;
			
			$(box).css('color', 'red');
			$(box2).css('color', 'red');
			$(box3).css('color', 'red');
		}
		
		
		function markX()
		{
		
		var box ="#" + event.target.id;
		$(box).html("X")
		determineIfGameWon();
		if(gamewon==false)
		{
			findOpenSquare();
			determineIfGameWon();
		}
		
		
		
		}
		
		
	
		function clearSquares()
		{
			for (x=0;x<10;x++)
			{
				var txtBoxToClear = "#txtBox" + x;
				$(txtBoxToClear).html("");
				$(txtBoxToClear).css('color', 'black');
				gamewon=false;
				
			
			
			}
		
		
		
		
		}
		
		function findOpenSquare()
		{
			
			var x=1;
			var changemade=false;
			while(x<10)
			{
			
				var txtBoxToCheck = "#txtBox" + x;
				if ($(txtBoxToCheck).html()=="")
				{
					$(txtBoxToCheck).html("O");
					changemade=true;
								
				}
				
				if (changemade==true)
					break;
				else
					x++;
			
			
			}
			
		}
		
		</script>

    </body>
</html>
